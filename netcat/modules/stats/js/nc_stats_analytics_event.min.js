(function(g,i,L,n,l,t,A,B){function p(a,c,b,d){a[L](c,b,d)}function j(a,c){for(var b=0;b<a.length;b++)c(a[b],b)}function u(a,c){if(c)try{var b=JSON.parse(c);b&&a.push(b)}catch(d){r("Invalid JSON",c)}return a}function s(a){return decodeURIComponent(i.cookie.replace(RegExp("(?:(?:^|.*;)\\s*"+t+a+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1").replace(/\+/g," "))}function C(a,c,b){var d=s("domain");i.cookie=t+a+"="+encodeURIComponent(c)+";path=/"+(d?";domain="+d:"")+(b?";expires="+(new Date(Date.now()+1E3*b)).toUTCString():
"")}function D(){var a=[],c=t.length,b=i.cookie.replace(/((?:^|\s*;)[^=]+)(?=;|$)|^\s*|\s*(?:=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:=[^;]*)?;\s*/);j(b,function(b){b.indexOf(t)||a.push(b.substr(c))});return a}function M(a){var c;return function(){clearTimeout(c);c=setTimeout(a,500)}}function N(a,c){var b=[];j(a,function(a){b.push(E(a,c))});return b}function E(a,c,b){var d={},f;for(f in a)d[c[f]||(b?b(f):f)]=a[f];return d}function Z(a){return a.replace(/[A-Z]/g,function(a){return"_"+a.toLowerCase()})}
function $(a){return a.replace(/_([a-z])/g,function(a){return a[1].toUpperCase()})}function r(a,c){v&&(c=(Array.isArray(c)?c:[c]).map(function(a){return"object"===typeof a?JSON.stringify(a):a}),console.log.apply(console,[A,a].concat(c)))}function O(a,c){return v?function(){var b=[].slice.call(arguments);r(a,b);c.apply(g,b)}:c}function q(a,c){if(a){var c=c||{},b;b=g.gtag?v?O("gtag",gtag):gtag:void 0;var d;d=b||w?B:(d=g.GoogleAnalyticsObject?g[GoogleAnalyticsObject]:B)?v?O("ga",d):d:void 0;var f=g._gaq,
o=g[F],h;if(!G)for(h in g)if(/yaCounter\d+/.test(h)&&g[h].reachGoal){G=g[h];break}h=G;var i=P?B:s("currency");P=!0;if(b&&(i&&b("set",{currency:i}),b("event",a,c),!h))return;b=aa+a;var k;a:{var e=c,l={},j={},m,n,p,q={view_item_list:"impressions",view_item:"detail",add_to_cart:"add",remove_from_cart:"remove",view_promotion:"promoView",begin_checkout:"checkout",checkout_progress:"checkout",set_checkout_option:"checkoutOption"};if(a in q)k=q[a];else if("select_content"===a)e.items?(k="click",e.items[0]&&
e.items[0].list_name&&(m={list:e.items[0].list_name})):e.promotions&&(k="promoClick");else if(/purchase|refund/.test(a))k=a,m={id:e.transaction_id,affiliation:e.affiliation,revenue:e.value,tax:e.tax,shipping:e.shipping,coupon:e.coupon};else{k={};break a}/checkout/.test(k)&&(m={step:e.checkout_step,option:e.checkout_option+(e.value?": "+e.value:"")});if(e.non_interaction)m=m||{},m.nonInteraction=1;if(m)j.actionField=m;if(e.items)n=j.products=N(e.items,{list_name:"list",list_position:"position"}),"impressions"===
k&&(j=n);if(e.promotions)p=j.promotions=N(e.promotions,{creative_name:"creative",creative_slot:"position"});if(e=e.currency||s("currency"))l.currencyCode=e;l[k]=j;k={action:k,category:/select_|view_/.test(a)?"engagement":"ecommerce",event:l,field:m,items:n,promos:p}}if(k.action){if(h||w)h={event:b,event_category:k.category,event_action:a,ecommerce:k.event},r(F,[h]),o.push(h);d&&(i&&d("set","currencyCode",i),h=k,f=Z(h.action),Q(d,"impressions"===f?"Impression":"Product",h.items),Q(d,"Promo",h.promos),
/promo_view|impressions/.test(f)||d("ec:setAction",f,h.field),d("send","event",h.category,a))}else{k=c.event_category||H;if(w)m=E(c,{}),m.event=b,m.event_action=m.event_action||a,r(F,[m]),o.push(m);d?(f="event",o={value:"eventValue",description:"exDescription",fatal:"exFatal"},"timing_complete"===a?(o.name="timingVar",f="timing"):"exception"===a&&(f=a),o=E(c,o,$),o.eventAction=o.eventAction||a,o.eventCategory=o.eventCategory||H,d("send",f,o)):f&&(d=["_trackEvent",k,a,c.event_label],r("_gaq",d),f.push(d));
h&&(d=k+"_"+a,r("YM.reachGoal",[d,c]),h.reachGoal(d,c))}}}function R(a){q.apply(g,a)}function I(a){var c=a.target,a=a.type,b="click"===a,d;do{var f=c[n](l+(a+"-category"));f&&ba(f,c[n](l+(a+"-action"))||a,c[n](l+(a+"-label")));if(b&&(d=d||"A"===c.tagName))S(c,"item"),S(c,"promo")}while(b&&(c=c.parentNode)&&c[n])}function Q(a,c,b){if(!b||!b.length)return!1;j(b,function(b){a("ec:add"+c,b)});return!0}function S(a,c){var b=a[n](l+c),d={};if(b&&(b=u([],b),b.length)){if("item"===c){if(d.items=b,d.content_type=
"product",b=b[0].list_name)d.list_name=b}else d.promotions=b;q("select_content",d)}}function x(a){if(D().length!==T)s(J)?a||setTimeout(x,1E3*U):(C(J,1,U),j(ca(),R),C(J,"",-1),T=D().length)}function ca(){var a={};j(D(),function(c){var b=c.match(/^event_(\d+_\d+)_(\d+)$/);if(b){var d=b[1];a[d]||(a[d]=[]);a[d][b[2]]=s(c);C(c,"",-1)}});var c=[],b,d;for(d in a)b=a[d].join(""),r("cookie",[b]),u(c,b);return c}function da(){var a=i.querySelectorAll("["+l+"item],["+l+"promo],["+l+"view-category]");j(a,function(a){a[n](l+
"-init")||(K.push(a),a.setAttribute(l+"-init",1))})}function V(){j(K,function(a,c){var b=a.getBoundingClientRect(),d=i.documentElement;0<b.height&&0<=b.right&&0<=b.bottom&&b.left+b.width*W<=d.clientWidth&&b.top+b.height*W<=d.clientHeight&&(delete K[c],a[n](l+"view-category")&&I({target:a,type:"view"}),u(y,a[n](l+"item")),u(z,a[n](l+"promo")))})}function ea(){if("visible"===i.visibilityState){var a=i.forms,c=a.length;if(c!==X){for(var b=0;b<c;b++)p(a[b],"submit",I,!0);X=c}da();V();x()}}function fa(){var a=
M(V),c=M(ea);p(g,"scroll",a);p(g,"resize",a);p(g,"focus",c);c();g.MutationObserver?(new MutationObserver(c)).observe(i,{childList:!0,subtree:!0}):setInterval(x,1E4)}if(i[L]){var v=!(!s("debug")||!g.console),G,F="dataLayer",H="event",Y=/\s*,\s*/,w,aa=H+"_",P,ba=function(a,c,b){j((a||"").split(Y),function(a){j((b||"").split(Y),function(b){q(c,{event_category:a,event_label:b})})})},y=[],z=[],J="lock",U=5,T=0,K=[],W=0.7,X=0;p(i,"click",I,!0);p(i,"DOMContentLoaded",function(){j(i.getElementsByTagName("script"),
function(a){/\/gtm.js\?/.test(a.src)&&(r("found",["gtm.js"]),w=!0)});var a=g[A];a&&a.E&&j(a.E,R);g[A]=q;setTimeout(fa,1E3)});p(g,"beforeunload",function(){y.length&&(q("view_item_list",{event_category:"engagement",items:y}),y=[]);z.length&&(q("view_promotion",{event_category:"engagement",promotions:z}),z=[]);x(!0)})}})(window,document,"addEventListener","getAttribute","data-analytics-","nc_stats_","nc_stats_analytics_event");
